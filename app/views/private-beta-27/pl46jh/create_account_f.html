{% extends "../layout/layout.html" %}
{% from "../includes/back_link.html" import back_link %}

{% block head_additionals %}

  <style type="text/css">
  .form-group {
    position: relative;
  }

  #circularG{
    position:relative;
    height:21px;
    margin: 5px auto;
    opacity: 0;
    transition: 0.3s opacity ease-in-out;
    display: block;
  }

  @media(min-width: 500px) {
    #circularG{
      position:absolute;
      margin-left: 30px;
      width:21px;
      left: 50%;
      width: 50%;
      top: 0;
      white-space: nowrap;
    }
  }

  #circularG:before {
    content: 'Checking if your email address already exists...';
    width: 100%;
    padding-left: 30px;
    left: 0;
  }

  #circularG.show {
    opacity: 1;
  }

  .circularG{
    position:absolute;
    background-color:rgb(0,0,0);
    width:5px;
    height:5px;
    border-radius:3px;
      -o-border-radius:3px;
      -ms-border-radius:3px;
      -webkit-border-radius:3px;
      -moz-border-radius:3px;
    animation-name:bounce_circularG;
      -o-animation-name:bounce_circularG;
      -ms-animation-name:bounce_circularG;
      -webkit-animation-name:bounce_circularG;
      -moz-animation-name:bounce_circularG;
    animation-duration:1.1s;
      -o-animation-duration:1.1s;
      -ms-animation-duration:1.1s;
      -webkit-animation-duration:1.1s;
      -moz-animation-duration:1.1s;
    animation-iteration-count:infinite;
      -o-animation-iteration-count:infinite;
      -ms-animation-iteration-count:infinite;
      -webkit-animation-iteration-count:infinite;
      -moz-animation-iteration-count:infinite;
    animation-direction:normal;
      -o-animation-direction:normal;
      -ms-animation-direction:normal;
      -webkit-animation-direction:normal;
      -moz-animation-direction:normal;
  }

  #circularG_1{
    left:0;
    top:8px;
    animation-delay:0.41s;
      -o-animation-delay:0.41s;
      -ms-animation-delay:0.41s;
      -webkit-animation-delay:0.41s;
      -moz-animation-delay:0.41s;
  }

  #circularG_2{
    left:2px;
    top:2px;
    animation-delay:0.55s;
      -o-animation-delay:0.55s;
      -ms-animation-delay:0.55s;
      -webkit-animation-delay:0.55s;
      -moz-animation-delay:0.55s;
  }

  #circularG_3{
    top:0;
    left:8px;
    animation-delay:0.69s;
      -o-animation-delay:0.69s;
      -ms-animation-delay:0.69s;
      -webkit-animation-delay:0.69s;
      -moz-animation-delay:0.69s;
  }

  #circularG_4{
    left:13px;
    top:2px;
    animation-delay:0.83s;
      -o-animation-delay:0.83s;
      -ms-animation-delay:0.83s;
      -webkit-animation-delay:0.83s;
      -moz-animation-delay:0.83s;
  }

  #circularG_5{
    left:15px;
    top:8px;
    animation-delay:0.97s;
      -o-animation-delay:0.97s;
      -ms-animation-delay:0.97s;
      -webkit-animation-delay:0.97s;
      -moz-animation-delay:0.97s;
  }

  #circularG_6{
    left:13px;
    bottom:2px;
    animation-delay:1.1s;
      -o-animation-delay:1.1s;
      -ms-animation-delay:1.1s;
      -webkit-animation-delay:1.1s;
      -moz-animation-delay:1.1s;
  }

  #circularG_7{
    left:8px;
    bottom:0;
    animation-delay:1.24s;
      -o-animation-delay:1.24s;
      -ms-animation-delay:1.24s;
      -webkit-animation-delay:1.24s;
      -moz-animation-delay:1.24s;
  }

  #circularG_8{
    left:2px;
    bottom:2px;
    animation-delay:1.38s;
      -o-animation-delay:1.38s;
      -ms-animation-delay:1.38s;
      -webkit-animation-delay:1.38s;
      -moz-animation-delay:1.38s;
  }



  @keyframes bounce_circularG{
    0%{
      transform:scale(1);
    }

    100%{
      transform:scale(.3);
    }
  }

  @-o-keyframes bounce_circularG{
    0%{
      -o-transform:scale(1);
    }

    100%{
      -o-transform:scale(.3);
    }
  }

  @-ms-keyframes bounce_circularG{
    0%{
      -ms-transform:scale(1);
    }

    100%{
      -ms-transform:scale(.3);
    }
  }

  @-webkit-keyframes bounce_circularG{
    0%{
      -webkit-transform:scale(1);
    }

    100%{
      -webkit-transform:scale(.3);
    }
  }

  @-moz-keyframes bounce_circularG{
    0%{
      -moz-transform:scale(1);
    }

    100%{
      -moz-transform:scale(.3);
    }
  }
  </style>

{% endblock %}

{% block title %}Create an account{% endblock %}

{% block header_primary %}
  {{ back_link(title='Back', prefix='Back')}}
{% endblock %}

{% block body %}

  <div class="grid-row spacing-top-double">

    <div class="column-two-thirds tablet-column-two-thirds">

      <h1 class="heading-large" style="margin-top:0px;">Create an account</h1>

<!--       <p>HM Land Registry won't share this information without your permission, as set out in its <a href="https://www.gov.uk/government/organisations/land-registry/about/personal-information-charter">privacy policy</a>.</p> -->
      <p class="lede">Due to the information this service reveals, we ask people to create an account with us.</p>


      <form class="spacing-top-double" action="registration_successful_f" method="POST" novalidate data-clientside-validation="create_account_form_validation">
        <input name="title_number" value="{{data.title_number}}" type="hidden" />
        <input name="buildname" value="{{data.buildname}}" type="hidden" />
        <input name="addr1" value="{{data.addr1}}" type="hidden" />
        <input name="tenure" value="{{data.tenure}}" type="hidden" />
        <input name="caution" value="{{data.caution}}" type="hidden" />

        <!-- <h2 class="heading-medium">Email address</h2> -->
        <fieldset>

          <legend class="visuallyhidden">email address</legend>

            <div class="form-group">

              <label class="form-label" for="email">Email address
<a href="#why-do-we-need-email" class="font-xsmall split-detail-trigger spacing-left-single">Our email usage policy</a>
              </label>

              <div class="split-detail-contents font-xsmall" id="why-do-we-need-email">
                <div class="panel panel-border-narrow spacing-bottom-single">
                  <p>Your email address will be used to log into the service in future. If you forget your password we will use your email address to help you reset it.</p>
                  <p>We won't use your email address for any purposes other than access to this service.</p>
                  <p>We won't share your email with third parties.</p>
                </div>
              </div>
              <input class="form-control" type="email" id="email" name="email" data-email-hint value="">

              <div id="circularG"><div id="circularG_1" class="circularG"></div><div id="circularG_2" class="circularG"></div><div id="circularG_3" class="circularG"></div><div id="circularG_4" class="circularG"></div><div id="circularG_5" class="circularG"></div><div id="circularG_6" class="circularG"></div><div id="circularG_7" class="circularG"></div><div id="circularG_8" class="circularG"></div></div>
            </div>

            <div style="clear:both" class="visuallyhidden warning media" id="email-in-use">
              <div class="media-item">
                <i class="icon icon-important">
                  <span class="visuallyhidden">Warning</span>
                </i>
              </div>

              <div class="media-body">
                <h2 class="heading-small spacing-bottom-flush">This email address is already in use</h2>
                <!-- <p class="spacing-top-flush">Would you like to <a href="sign_in?title_number={{data.title_number}}&amp;email=pat@gmail.com">sign in</a> or <a href="reset/password/email_sent?title_number={{data.title_number}}&amp;email=pat@gmail.com">create a new password</a>?</p> -->
              </div>
            </div>

            <div class="panel panel-border-narrow visuallyhidden email-hint">
              <p>Please ensure your email address is displayed correctly below. If you forget your password we will use your email address to help you reset it.</p>
              <p id="email-hint-value" class="bold"></p>
            </div>

        </fieldset>


        <!-- <h2 class="heading-medium disabled-if-email-exists spacing-top-half">Create a password</h2> -->

        <fieldset class="disabled-if-email-exists spacing-top-flush">

          <legend class="visuallyhidden">Create a password</legend>

          <div class="form-group">

<!--             <p class="form-hint spacing-bottom-flush">Your password must:</p>
            <ul class="form-hint list list-bullet spacing-bottom-half">
              <li>be between 8 and 20 characters</li>
              <li>contain 2 numbers</li>
              <li>not contain the symbols &pound; &#x20AC; &#x00AC; &#x00A6;</li>
            </ul> -->

            <label class="form-label" for="pass">Create a password</label>
            <input class="form-control" type="password" id="pass" name="pass">
          </div>

          <div class="form-group">
            <label class="form-label" for="password_retype">Re-type your password</label>
            <input class="form-control" id="password_retype" name="password_retype" type="password" value="">

            <p class="form-hint spacing-top-half">Your password must:</p>
            <ul class="form-hint list list-bullet spacing-bottom-flush">
              <li>be between 8 and 20 characters</li>
              <li>contain 2 numbers</li>
              <li>not contain the symbols &pound; &#x20AC; &#x00AC; &#x00A6;</li>
            </ul>

          </div>

        </fieldset>


        <h2 class="heading-medium disabled-if-email-exists">Your details</h2>

        <fieldset class="disabled-if-email-exists">

          <legend class="visuallyhidden">Your details</legend>

          <div class="form-group">
            <label class="form-label" for="title">Title</label>
            <select class="form-control" id="title" name="title">
              <option value="">Please select a title</option>
              <option value="Mr">Mr</option>
              <option value="Mrs">Mrs</option>
              <option value="Miss">Miss</option>
              <option value="Ms">Ms</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="firstname">First name</label>
            <input class="form-control" type="text" id="firstname" name="firstname">
          </div>

          <div class="form-group">
            <label class="form-label" for="lastname">Last name</label>
            <input class="form-control" type="text" id="lastname" name="lastname">
          </div>

          <div class="form-group">
            <label class="form-label" for="phone">Phone number (optional)</label>
            <input class="form-control" type="text" id="phone" name="phone">
          </div>


        </fieldset>

        <h2 class="heading-medium disabled-if-email-exists">Address</h2>

        <fieldset class="disabled-if-email-exists">

          <legend class="visuallyhidden">Your address</legend>

          <div class="form-group">
            <label class="form-label" for="address">First line of your address</label>
            <input class="form-control" type="text" id="address" name="address">
          </div>

          <div class="form-group">
            <label class="form-label" for="city">Town or City</label>
            <input class="form-control" type="text" id="town" name="town">
          </div>

          <div class="form-group">
            <label class="form-label" for="country">Country</label>
<select class="form-control" id="country" name="country">
              
                <option value="AF">Afghanistan</option>
              
                <option value="AL">Albania</option>
              
                <option value="DZ">Algeria</option>
              
                <option value="AD">Andorra</option>
              
                <option value="AO">Angola</option>
              
                <option value="AG">Antigua and Barbuda</option>
              
                <option value="AR">Argentina</option>
              
                <option value="AM">Armenia</option>
              
                <option value="AU">Australia</option>
              
                <option value="AT">Austria</option>
              
                <option value="AZ">Azerbaijan</option>
              
                <option value="BH">Bahrain</option>
              
                <option value="BD">Bangladesh</option>
              
                <option value="BB">Barbados</option>
              
                <option value="BY">Belarus</option>
              
                <option value="BE">Belgium</option>
              
                <option value="BZ">Belize</option>
              
                <option value="BJ">Benin</option>
              
                <option value="BT">Bhutan</option>
              
                <option value="BO">Bolivia</option>
              
                <option value="BA">Bosnia and Herzegovina</option>
              
                <option value="BW">Botswana</option>
              
                <option value="BR">Brazil</option>
              
                <option value="BN">Brunei</option>
              
                <option value="BG">Bulgaria</option>
              
                <option value="BF">Burkina Faso</option>
              
                <option value="MM">Burma</option>
              
                <option value="BI">Burundi</option>
              
                <option value="KH">Cambodia</option>
              
                <option value="CM">Cameroon</option>
              
                <option value="CA">Canada</option>
              
                <option value="CV">Cape Verde</option>
              
                <option value="CF">Central African Republic</option>
              
                <option value="TD">Chad</option>
              
                <option value="CL">Chile</option>
              
                <option value="CN">China</option>
              
                <option value="CO">Colombia</option>
              
                <option value="KM">Comoros</option>
              
                <option value="CG">Congo</option>
              
                <option value="CD">Congo (Democratic Republic)</option>
              
                <option value="CR">Costa Rica</option>
              
                <option value="HR">Croatia</option>
              
                <option value="CU">Cuba</option>
              
                <option value="CY">Cyprus</option>
              
                <option value="CZ">Czech Republic</option>
              
                <option value="CS">Czechoslovakia</option>
              
                <option value="DK">Denmark</option>
              
                <option value="DJ">Djibouti</option>
              
                <option value="DM">Dominica</option>
              
                <option value="DO">Dominican Republic</option>
              
                <option value="DD">East Germany</option>
              
                <option value="TL">East Timor</option>
              
                <option value="EC">Ecuador</option>
              
                <option value="EG">Egypt</option>
              
                <option value="SV">El Salvador</option>
              
                <option value="GQ">Equatorial Guinea</option>
              
                <option value="ER">Eritrea</option>
              
                <option value="EE">Estonia</option>
              
                <option value="ET">Ethiopia</option>
              
                <option value="FJ">Fiji</option>
              
                <option value="FI">Finland</option>
              
                <option value="FR">France</option>
              
                <option value="GA">Gabon</option>
              
                <option value="GE">Georgia</option>
              
                <option value="DE">Germany</option>
              
                <option value="GH">Ghana</option>
              
                <option value="GR">Greece</option>
              
                <option value="GD">Grenada</option>
              
                <option value="GT">Guatemala</option>
              
                <option value="GN">Guinea</option>
              
                <option value="GW">Guinea-Bissau</option>
              
                <option value="GY">Guyana</option>
              
                <option value="HT">Haiti</option>
              
                <option value="HN">Honduras</option>
              
                <option value="HU">Hungary</option>
              
                <option value="IS">Iceland</option>
              
                <option value="IN">India</option>
              
                <option value="ID">Indonesia</option>
              
                <option value="IR">Iran</option>
              
                <option value="IQ">Iraq</option>
              
                <option value="IE">Ireland</option>
              
                <option value="IL">Israel</option>
              
                <option value="IT">Italy</option>
              
                <option value="CI">Ivory Coast</option>
              
                <option value="JM">Jamaica</option>
              
                <option value="JP">Japan</option>
              
                <option value="JO">Jordan</option>
              
                <option value="KZ">Kazakhstan</option>
              
                <option value="KE">Kenya</option>
              
                <option value="KI">Kiribati</option>
              
                <option value="XK">Kosovo</option>
              
                <option value="KW">Kuwait</option>
              
                <option value="KG">Kyrgyzstan</option>
              
                <option value="LA">Laos</option>
              
                <option value="LV">Latvia</option>
              
                <option value="LB">Lebanon</option>
              
                <option value="LS">Lesotho</option>
              
                <option value="LR">Liberia</option>
              
                <option value="LY">Libya</option>
              
                <option value="LI">Liechtenstein</option>
              
                <option value="LT">Lithuania</option>
              
                <option value="LU">Luxembourg</option>
              
                <option value="MK">Macedonia</option>
              
                <option value="MG">Madagascar</option>
              
                <option value="MW">Malawi</option>
              
                <option value="MY">Malaysia</option>
              
                <option value="MV">Maldives</option>
              
                <option value="ML">Mali</option>
              
                <option value="MT">Malta</option>
              
                <option value="MH">Marshall Islands</option>
              
                <option value="MR">Mauritania</option>
              
                <option value="MU">Mauritius</option>
              
                <option value="MX">Mexico</option>
              
                <option value="FM">Micronesia</option>
              
                <option value="MD">Moldova</option>
              
                <option value="MC">Monaco</option>
              
                <option value="MN">Mongolia</option>
              
                <option value="ME">Montenegro</option>
              
                <option value="MA">Morocco</option>
              
                <option value="MZ">Mozambique</option>
              
                <option value="NA">Namibia</option>
              
                <option value="NR">Nauru</option>
              
                <option value="NP">Nepal</option>
              
                <option value="NL">Netherlands</option>
              
                <option value="NZ">New Zealand</option>
              
                <option value="NI">Nicaragua</option>
              
                <option value="NE">Niger</option>
              
                <option value="NG">Nigeria</option>
              
                <option value="KP">North Korea</option>
              
                <option value="NO">Norway</option>
              
                <option value="OM">Oman</option>
              
                <option value="PK">Pakistan</option>
              
                <option value="PW">Palau</option>
              
                <option value="PA">Panama</option>
              
                <option value="PG">Papua New Guinea</option>
              
                <option value="PY">Paraguay</option>
              
                <option value="PE">Peru</option>
              
                <option value="PH">Philippines</option>
              
                <option value="PL">Poland</option>
              
                <option value="PT">Portugal</option>
              
                <option value="QA">Qatar</option>
              
                <option value="RO">Romania</option>
              
                <option value="RU">Russia</option>
              
                <option value="RW">Rwanda</option>
              
                <option value="WS">Samoa</option>
              
                <option value="SM">San Marino</option>
              
                <option value="ST">Sao Tome and Principe</option>
              
                <option value="SA">Saudi Arabia</option>
              
                <option value="SN">Senegal</option>
              
                <option value="RS">Serbia</option>
              
                <option value="SC">Seychelles</option>
              
                <option value="SL">Sierra Leone</option>
              
                <option value="SG">Singapore</option>
              
                <option value="SK">Slovakia</option>
              
                <option value="SI">Slovenia</option>
              
                <option value="SB">Solomon Islands</option>
              
                <option value="SO">Somalia</option>
              
                <option value="ZA">South Africa</option>
              
                <option value="KR">South Korea</option>
              
                <option value="SS">South Sudan</option>
              
                <option value="ES">Spain</option>
              
                <option value="LK">Sri Lanka</option>
              
                <option value="KN">St Kitts and Nevis</option>
              
                <option value="LC">St Lucia</option>
              
                <option value="VC">St Vincent</option>
              
                <option value="SD">Sudan</option>
              
                <option value="SR">Suriname</option>
              
                <option value="SZ">Swaziland</option>
              
                <option value="SE">Sweden</option>
              
                <option value="CH">Switzerland</option>
              
                <option value="SY">Syria</option>
              
                <option value="TJ">Tajikistan</option>
              
                <option value="TZ">Tanzania</option>
              
                <option value="TH">Thailand</option>
              
                <option value="BS">The Bahamas</option>
              
                <option value="GM">The Gambia</option>
              
                <option value="TG">Togo</option>
              
                <option value="TO">Tonga</option>
              
                <option value="TT">Trinidad and Tobago</option>
              
                <option value="TN">Tunisia</option>
              
                <option value="TR">Turkey</option>
              
                <option value="TM">Turkmenistan</option>
              
                <option value="TV">Tuvalu</option>
              
                <option value="SU">USSR</option>
              
                <option value="UG">Uganda</option>
              
                <option value="UA">Ukraine</option>
              
                <option value="AE">United Arab Emirates</option>
              
                <option value="GB" selected="">United Kingdom</option>
              
                <option value="US">United States</option>
              
                <option value="UY">Uruguay</option>
              
                <option value="UZ">Uzbekistan</option>
              
                <option value="VU">Vanuatu</option>
              
                <option value="VA">Vatican City</option>
              
                <option value="VE">Venezuela</option>
              
                <option value="VN">Vietnam</option>
              
                <option value="YE">Yemen</option>
              
                <option value="YU">Yugoslavia</option>
              
                <option value="ZM">Zambia</option>
              
                <option value="ZW">Zimbabwe</option>
              
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="postcode">Postcode</label>
            <input size="12" class="form-control" type="text" id="postcode" name="postcode">
          </div>

        </fieldset>

        <div class="form-group spacing-top-double disabled-if-email-exists">
          <div class="multiple-choice">
            <input id="terms" name="terms" type="checkbox" value="terms">
            <label for="terms">
              I have read and agree to the <a href="terms_and_conditions">terms of use</a>
            </label>
          </div>
        </div>

        <input type="submit" id="continueToPay" class="button spacing-top-single disabled-if-email-exists" value="Create account" disabled-x>
      </form>

      <div class="panel panel-border-narrow spacing-top-double">
        <p>If you have any problems creating an account, you can <a href="https://www.gov.uk/government/organisations/land-registry/about/access-and-opening">contact HM Land Registry</a>.</p>
      </div>

      <script type="application/json" id="create_account_form_validation">
        {
          "email": {
            "email": true,
            "presence": {
              "message": "You need to provide an email address"
            }
          },
          "pass": {
            "presence": {
              "message": "You need to provide a password"
            },
            "length": {
              "minimum": 8,
              "maximum": 20,
              "message": "Your Password must be between 8 and 20 characters long. Characters can include letters, number and symbols."
            },
            "find_property_information_password": true
          },
          "password_retype": {
            "presence": {
              "message": "You need to re-type your password"
            },
            "length": {
              "minimum": 8,
              "maximum": 20,
              "message": "Please make sure both passwords match"
            },
            "find_property_information_password": true
          },
          "title": {
            "presence": {
              "message": "You need to provide your Title"
            }
          },
          "firstname": {
            "presence": {
              "message": "You need to provide a First name"
            }
          },
          "lastname": {
            "presence": {
              "message": "You need to provide a Last name"
            }
          },
          "address": {
            "presence": {
              "message": "You need to provide the First line of your Address"
            }
          },
          "town": {
            "presence": {
              "message": "You need to provide a Town or City"
            }
          },
          "country": {
            "presence": {
              "message": "You need to provide a Country"
            }
          },
          "postcode": {
            "presence": {
              "message": "You need to provide a Postcode"
            }
          },
          "terms": {
            "presence": {
              "message": "You need to agree the terms of use for this service"
            }
          }
        }
      </script>

      <!-- <script>
        (function() {
          var emailInput = document.getElementById('email');

          var fields = document.querySelectorAll('input[type="text"], input[type="password"], input[type="submit"], select');
          var disabledIfEmailExists = document.querySelectorAll('.disabled-if-email-exists');

          var emailDebounceTimeout;
          var emailCheckTimeout;
          var emailCheckSpinner = document.getElementById('circularG');

          var existingEmails = [
            'john@gmail.com',
            'jane@gmail.com',
            'pat@gmail.com'
          ];

          var signinMessage = document.getElementById('email-in-use');

          function change(e) {
            clearTimeout(emailCheckTimeout);
            clearTimeout(emailDebounceTimeout);

            emailCheckSpinner.classList.remove('show');
            emailDebounceTimeout = setTimeout(function() {
              emailCheckSpinner.classList.add('show');

              emailCheckTimeout = setTimeout(function() {
                emailCheckSpinner.classList.remove('show');

                if(existingEmails.indexOf(emailInput.value) === -1) {
                  signinMessage.classList.add('visuallyhidden');

                  [].forEach.call(fields, function(field) {
                    field.disabled = false;
                    // document.getElementById('continueToPay').disabled = true;

                    [].forEach.call(disabledIfEmailExists, function(item) {
                      item.style.opacity = 1;
                    });
                  });

                } else {
                  signinMessage.classList.remove('visuallyhidden');

                  [].forEach.call(fields, function(field) {
                    field.disabled = true;

                    [].forEach.call(disabledIfEmailExists, function(item) {
                      item.style.opacity = 0.3;
                    });
                  });
                }

              }, 1500);
            }, 300);
          }

          emailInput.addEventListener('keyup', change);
          emailInput.addEventListener('change', change);
        })();
      </script> -->

<!--       <script>
        (function() {
          var terms = document.getElementById('terms');

          var payButton = document.getElementById('continueToPay');

          function change(e) {

                if((terms.checked) == true) {
                    payButton.disabled = false;
                } else {
                    payButton.disabled = true;
                };

          }
          terms.addEventListener('change', change);
        })();
      </script> -->


    </div>

<!--     <div class="column-one-third tablet-column-one-third">
      <aside class="supplementary-panel">
        <h2 class="heading-medium">Need help with this service?</h2>
        <p>Call HM Land Registry on 0300 006 0411 to report a problem, or if you're stuck and need help.</p>
      </aside>
    </div> -->
  </div>
{% endblock %}
